<!doctype html>
<html lang="ja">

<head>
	<meta charset="utf-8" />
	<title>test</title>
</head>

<body>
	<h1>Login</h1>
	<div class="container unauthenticated">
		With GitHub: <a href="/oauth2/authorization/github">click here</a>
	</div>
	<div class="container authenticated" style="display: none">
		Logged in as: <span id="user"></span>
		<div>
			<button onClick="logout()" class="btn btn-primary">Logout</button>
		</div>
	</div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
	<script type="text/javascript">
		$
			.ajaxSetup({
				beforeSend: function (xhr, settings) {
					if (settings.type == 'POST' || settings.type == 'PUT'
						|| settings.type == 'DELETE') {
						if (!(/^http:.*/.test(settings.url) || /^https:.*/
							.test(settings.url))) {
							// Only send the token to relative URLs i.e. locally.
							xhr.setRequestHeader("X-XSRF-TOKEN",
								Cookies.get('XSRF-TOKEN'));
						}
					}
				}
			});
		$.get("/user", function (data) {
			$("#user").html(data);
			$(".unauthenticated").hide();
			$(".authenticated").show();
		});
		var logout = function () {
			$.post("/logout", function () {
				$("#user").html('');
				$(".unauthenticated").show();
				$(".authenticated").hide();
			})
			return true;
		}
	</script>
</body>

</html>